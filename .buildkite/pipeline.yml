env:
  COMPOSE_FILE: docker-compose.pipeline.yml

steps:
  - label: ":docker: Test"
    command: npm run pipelineTest
    plugins:
      - docker-compose#v3.9.0:
          run: ut

  - wait

  - label: ":docker: Build"
    command: ./ops/build

  - wait

  - label: ":battery: Publish Image"
    command: ./ops/pushImage

  - wait

  - label: ":rocket: Deploy"
    command: ./ops/deploy
